define("xStorage",[],function(){"use strict";function e(){}var t="ls_update",n="__ls_meta",r="ls";return function(e){function o(){var e=!1;if("localStorage"in window)try{window.localStorage.setItem("_tmptest","tmpval"),e=!0,window.localStorage.removeItem("_tmptest")}catch(n){}if(e)try{window.localStorage&&(O=window.localStorage,A="localStorage",j=O[t])}catch(o){}else if("globalStorage"in window)try{window.globalStorage&&(O="localhost"==window.location.hostname?window.globalStorage["localhost.localdomain"]:window.globalStorage[window.location.hostname],A="globalStorage",j=O[t])}catch(i){}else{if(P=document.createElement("link"),!P.addBehavior)return void(P=null);P.style.behavior="url(#default#userData)",document.getElementsByTagName("head")[0].appendChild(P);try{P.load(r)}catch(c){P.setAttribute(r,"{}"),P.save(r),P.load(r)}var l="{}";try{l=P.getAttribute(r)}catch(s){}try{j=P.getAttribute(t)}catch(d){}O[r]=l,A="userDataBehavior"}f(),h(),a(),g(),"addEventListener"in window&&window.addEventListener("pageshow",function(e){e.persisted&&u()},!1)}function i(){var e="{}";if("userDataBehavior"==A){P.load(r);try{e=P.getAttribute(r)}catch(n){}try{j=P.getAttribute(t)}catch(o){}O[r]=e}f(),h(),g()}function a(){"localStorage"==A||"globalStorage"==A?"addEventListener"in window?window.addEventListener("storage",u,!1):document.attachEvent("onstorage",u):"userDataBehavior"==A&&setInterval(u,1e3)}function u(){var e;clearTimeout(M),M=setTimeout(function(){if("localStorage"==A||"globalStorage"==A)e=O[t];else if("userDataBehavior"==A){P.load(r);try{e=P.getAttribute(t)}catch(n){}}e&&e!=j&&(j=e,c())},25)}function c(){var e,t=m.parse(m.stringify(L[n].CRC32));i(),e=m.parse(m.stringify(L[n].CRC32));var r,o=[],a=[];for(r in t)if(t.hasOwnProperty(r)){if(!e[r]){a.push(r);continue}t[r]!=e[r]&&"2."==String(t[r]).substr(0,2)&&o.push(r)}for(r in e)e.hasOwnProperty(r)&&(t[r]||o.push(r));l(o,"updated"),l(a,"deleted")}function l(e,t){e=[].concat(e||[]);var n,r,o,i;if("flushed"==t){e=[];for(var a in N)N.hasOwnProperty(a)&&e.push(a);t="deleted"}for(n=0,o=e.length;o>n;n++){if(N[e[n]])for(r=0,i=N[e[n]].length;i>r;r++)N[e[n]][r](e[n],t);if(N["*"])for(r=0,i=N["*"].length;i>r;r++)N["*"][r](e[n],t)}}function s(){var e=(+new Date).toString();if("localStorage"==A||"globalStorage"==A)try{O[t]=e}catch(n){A=!1}else"userDataBehavior"==A&&(P.setAttribute(t,e),P.save(r));u()}function f(){if(O[r])try{L=m.parse(String(O[r]))}catch(e){O[r]="{}"}else O[r]="{}";D=O[r]?String(O[r]).length:0,L[n]||(L[n]={}),L[n].CRC32||(L[n].CRC32={})}function d(){p();try{O[r]=m.stringify(L),P&&(P.setAttribute(r,O[r]),P.save(r)),D=O[r]?String(O[r]).length:0}catch(e){}}function w(e){if("string"!=typeof e&&"number"!=typeof e)throw new TypeError("Key name must be string or numeric");if(e==n)throw new TypeError("Reserved key name");return!0}function h(){var e,t,r,o,i=1/0,a=!1,u=[];if(clearTimeout(C),L[n]&&"object"==typeof L[n].TTL){e=+new Date,r=L[n].TTL,o=L[n].CRC32;for(t in r)r.hasOwnProperty(t)&&(r[t]<=e?(delete r[t],delete o[t],delete L[t],a=!0,u.push(t)):r[t]<i&&(i=r[t]));i!=1/0&&(C=setTimeout(h,Math.min(i-e,2147483647))),a&&(d(),s(),l(u,"deleted"))}}function g(){var e,t;if(L[n].PubSub){var r,o=J,i=[];for(e=t=L[n].PubSub.length-1;e>=0;e--)r=L[n].PubSub[e],r[0]>J&&(o=r[0],i.unshift(r));for(e=i.length-1;e>=0;e--)b(i[e][1],i[e][2]);J=o}}function b(e,t){if(E[e])for(var n=0,r=E[e].length;r>n;n++)try{E[e][n](e,m.parse(m.stringify(t)))}catch(o){}}function p(){if(L[n].PubSub){for(var e=+new Date-2e3,t=0,r=L[n].PubSub.length;r>t;t++)if(L[n].PubSub[t][0]<=e){L[n].PubSub.splice(t,L[n].PubSub.length-t);break}L[n].PubSub.length||delete L[n].PubSub}}function S(e,t){L[n]||(L[n]={}),L[n].PubSub||(L[n].PubSub=[]),L[n].PubSub.unshift([+new Date,e,t]),d(),s()}function y(e,t){for(var n,r=e.length,o=t^r,i=0;r>=4;)n=255&e.charCodeAt(i)|(255&e.charCodeAt(++i))<<8|(255&e.charCodeAt(++i))<<16|(255&e.charCodeAt(++i))<<24,n=1540483477*(65535&n)+((1540483477*(n>>>16)&65535)<<16),n^=n>>>24,n=1540483477*(65535&n)+((1540483477*(n>>>16)&65535)<<16),o=1540483477*(65535&o)+((1540483477*(o>>>16)&65535)<<16)^n,r-=4,++i;switch(r){case 3:o^=(255&e.charCodeAt(i+2))<<16;case 2:o^=(255&e.charCodeAt(i+1))<<8;case 1:o^=255&e.charCodeAt(i),o=1540483477*(65535&o)+((1540483477*(o>>>16)&65535)<<16)}return o^=o>>>13,o=1540483477*(65535&o)+((1540483477*(o>>>16)&65535)<<16),o^=o>>>15,o>>>0}var v="0.4.12",T=window.jQuery||window.$||(window.$={}),m={parse:window.JSON&&(window.JSON.parse||window.JSON.decode)||String.prototype.evalJSON&&function(e){return String(e).evalJSON()}||T.parseJSON||T.evalJSON,stringify:Object.toJSON||window.JSON&&(window.JSON.stringify||window.JSON.encode)||T.toJSON};if("function"!=typeof m.parse||"function"!=typeof m.stringify)throw new Error("No JSON support found, include //cdnjs.cloudflare.com/ajax/libs/json2/20110223/json2.js to page");var C,L={},O={},P=null,D=0,A=!1,N={},M=!1,j=0,E={},J=+new Date,x={isXML:function(e){var t=(e?e.ownerDocument||e:0).documentElement;return t?"HTML"!==t.nodeName:!1},encode:function(e){if(!this.isXML(e))return!1;try{return(new XMLSerializer).serializeToString(e)}catch(t){try{return e.xml}catch(n){}}return!1},decode:function(e){var t,n="DOMParser"in window&&(new DOMParser).parseFromString||window.ActiveXObject&&function(e){var t=new ActiveXObject("Microsoft.XMLDOM");return t.async="false",t.loadXML(e),t};return n?(t=n.call("DOMParser"in window&&new DOMParser||window,e,"text/xml"),this.isXML(t)?t:!1):!1}};L[n]={CRC32:{}},O[r]="{}",e.prototype={version:v,set:function(e,t,r){if(w(e),r=r||{},"undefined"==typeof t)return this.deleteKey(e),t;if(x.isXML(t))t={_is_xml:!0,xml:x.encode(t)};else{if("function"==typeof t)return void 0;t&&"object"==typeof t&&(t=m.parse(m.stringify(t)))}return L[e]=t,L[n].CRC32[e]="2."+y(m.stringify(t),2538058380),this.setTTL(e,r.TTL||0),l(e,"updated"),t},get:function(e,t){return w(e),e in L?L[e]&&"object"==typeof L[e]&&L[e]._is_xml?x.decode(L[e].xml):L[e]:"undefined"==typeof t?null:t},deleteKey:function(e){return w(e),e in L?(delete L[e],"object"==typeof L[n].TTL&&e in L[n].TTL&&delete L[n].TTL[e],delete L[n].CRC32[e],d(),s(),l(e,"deleted"),!0):!1},setTTL:function(e,t){var r=+new Date;return w(e),t=Number(t)||0,e in L?(L[n].TTL||(L[n].TTL={}),t>0?L[n].TTL[e]=r+t:delete L[n].TTL[e],d(),h(),s(),!0):!1},getTTL:function(e){var t,r=+new Date;return w(e),e in L&&L[n].TTL&&L[n].TTL[e]?(t=L[n].TTL[e]-r,t||0):0},flush:function(){return L={},L[n]={CRC32:{}},d(),s(),l(null,"flushed"),!0},storageObj:function(){function e(){}return e.prototype=L,new e},index:function(){var e,t=[];for(e in L)L.hasOwnProperty(e)&&e!=n&&t.push(e);return t},storageSize:function(){return D},currentBackend:function(){return A},storageAvailable:function(){return!!A},listenKeyChange:function(e,t){w(e),N[e]||(N[e]=[]),N[e].push(t)},stopListening:function(e,t){if(w(e),N[e]){if(!t)return void delete N[e];for(var n=N[e].length-1;n>=0;n--)N[e][n]==t&&N[e].splice(n,1)}},subscribe:function(e,t){if(e=(e||"").toString(),!e)throw new TypeError("Channel not defined");E[e]||(E[e]=[]),E[e].push(t)},publish:function(e,t){if(e=(e||"").toString(),!e)throw new TypeError("Channel not defined");S(e,t)},reInit:function(){i()}},o()}(e),new e});